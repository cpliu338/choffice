<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui" xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="../WEB-INF/simpleTemplate.xhtml">
    <ui:define name="title">
        <h:outputText value="#{msg.app}" ></h:outputText>
    </ui:define>

    <ui:define name="content">
        <h:form prependId="false">
            <ui:include src="/WEB-INF/memberChooser.xhtml">
                <ui:param name="dest" value="card editpanel"/>
            </ui:include>
            <p:panel id="card">
        <p:growl id="notify" showDetail="true"/>
    <table width="330" height="200" border="1" cellpadding="0" cellspacing="0" ><tr>
            <td class="watermark2" style="background-image: url(/choffice/members/card.jsf?primefacesDynamicContent=streamedBean.wheat)" >
    <table cellpadding="0" cellspacing="0">
    <tr><td align="left" colspan="2" height="30"><img src="http://therismos.dyndns.org:8080/barcode/serve?id=logo1" /></td></tr>
    <tr><td width="160" align="center" height="115">
            <p:graphicImage id="photo" value="#{streamedBean.photo}" width="101">
                <f:param name="id" value="#{streamedBean.memberId}"/>
            </p:graphicImage>
    </td><td valign="top" width="170"><font size="2" style="line-height:35px"><b>姓 名 :</b></font><font size="3" style="line-height:35px">
            <h:outputText value="#{memberBean.name}" style="font-weight:bold"/></font><br/>
        <font size="2" style="line-height:35px"><b>稱 呼 :</b></font><font size="3" style="line-height:35px">
            <h:outputText value="#{memberBean.nickname}" style="font-weight:bold"/>
        </font><br/>
        <font size="2" style="line-height:35px"><b>團 契 :</b></font><font size="3" style="line-height:35px"><b>
                <h:outputText value="#{memberBean.group}"/>
            </b></font></td></tr>
        <tr><td height="46" colspan="2" align="center">
                <p:graphicImage id="barcode" alt="barcode" value="#{streamedBean.barcode}">
                    <f:param name="id" value="#{memberBean.id}"/>
                </p:graphicImage>
            </td></tr>
    </table>
    </td></tr></table>
            </p:panel>
            <p:panel id="editpanel" header="Edit" collapsed="true" toggleable="true" toggleSpeed="500">
                <h:outputText value="#{memberBean.id}"/>:
                <h:outputText value="#{memberBean.name}"/>
                <h:commandLink action="#{memberBean.edit}">Edit</h:commandLink>
            </p:panel>
        </h:form>
        <h:form prependId="false" id="uploadForm" enctype="multipart/form-data">
            <p:fileUpload update="photo" id="upload" fileUploadListener="#{streamedBean.handleFileUpload}" sizeLimit="2048000"
                  allowTypes="*.jpg;*.png;*.gif;" uploadLabel="Images"/>
        </h:form>
    </ui:define>

</ui:composition>
